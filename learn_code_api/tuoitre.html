<html>
<head>
    <title>Nguy·ªÖn Th·ªã Y·∫øn Nhi - D·ª± B√°o Th·ªùi Ti·∫øt</title>
    <style>
        * 
        {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body 
        {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 30px 20px;
        }
        
        .container 
        {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header 
        {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h3 
        {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: 700;
        }
        
        .search-box 
        {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        select 
        {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        select:hover 
        {
            border-color: #667eea;
        }
        
        select:focus 
        {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        #my_div 
        {
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn 
        {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading 
        {
            background: white;
            border-radius: 15px;
            padding: 50px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            color: #667eea;
            font-size: 1.2em;
        }
        
        .loading-spinner 
        {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin 
        {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error 
        {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            color: #e74c3c;
        }
        
        .weather-card 
        {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .current-weather
        {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .weather-main 
        {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .weather-icon img 
        {
            width: 120px;
            height: 120px;
        }
        
        .weather-temp 
        {
            font-size: 4em;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .weather-temp .degree 
        {
            font-size: 0.5em;
            color: #7f8c8d;
        }
        
        .weather-info-main 
        {
            text-align: right;
        }
        
        .location-name 
        {
            font-size: 2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .weather-status 
        {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .temp-range 
        {
            font-size: 1.1em;
            color: #95a5a6;
        }
        
        .weather-details 
        {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .detail-item 
        {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .detail-label 
        {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 8px;
        }
        
        .detail-value 
        {
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .hourly-forecast 
        {
            margin-bottom: 30px;
        }
        
        .section-title 
        {
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .hourly-items 
        {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }
        
        .hourly-item 
        {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 100px;
        }
        
        .hourly-time 
        {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .hourly-icon img 
        {
            width: 50px;
            height: 50px;
            margin: 10px 0;
        }
        
        .hourly-temp 
        {
            font-size: 1.3em;
            font-weight: 600;
            color: #667eea;
        }
        
        .hourly-status 
        {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .daily-forecast 
        {
            margin-bottom: 20px;
        }
        
        .forecast-items 
        {
            display: grid;
            gap: 15px;
        }
        
        .forecast-item 
        {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .forecast-date 
        {
            font-weight: 600;
            color: #2c3e50;
            min-width: 80px;
        }
        
        .forecast-icon img 
        {
            width: 50px;
            height: 50px;
        }
        
        .forecast-status 
        {
            flex: 1;
            margin: 0 20px;
            color: #7f8c8d;
        }
        
        .forecast-precipitation 
        {
            color: #3498db;
            margin-right: 20px;
        }
        
        .forecast-temp 
        {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .forecast-temp .high 
        {
            color: #e74c3c;
        }
        
        .forecast-temp .low 
        {
            color: #3498db;
        }
        
        .air-quality 
        {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .air-quality-header 
        {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .air-icon img 
        {
            width: 48px;
            height: 48px;
        }
        
        .air-info 
        {
            flex: 1;
        }
        
        .air-status 
        {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .air-index 
        {
            color: #7f8c8d;
        }
        
        .placeholder 
        {
            background: white;
            border-radius: 20px;
            padding: 100px 40px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            color: #95a5a6;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h3>D·ª± B√°o Th·ªùi Ti·∫øt Vi·ªát Nam</h3>
        </div>
        
        <div class="search-box">
            <select id="provinces" onchange="show_detail_weather_forecast(this.value)">
                <option value="">-- Ch·ªçn t·ªânh/th√†nh ph·ªë --</option>
            </select>
        </div>
        
        <div id="my_div">
            <p class="placeholder">Vui l√≤ng ch·ªçn m·ªôt t·ªânh/th√†nh ph·ªë ƒë·ªÉ xem d·ª± b√°o th·ªùi ti·∫øt üåç</p>
        </div>
    </div>

    <script type="text/javascript">
        var ids=['2347719', '20070078', '20070086', '2347731', '2347730', '20070081', '20070087', '20070084', '20070088', '2347703', '2347704', '20070082', '2347732', '28301718', '20070085', '1252375', '2347720', '28301719', '2347721', '2347722', '2347733', '2347727', '2347728', '2347734', '2347741', '2347736', '2347737', '20070079', '20070080', '2347707', '28301720', '2347738', '2347723', '20070076', '2347708', '2347710', '2347740', '2347709', '2347718', '20070089', '2347742', '2347743', '2347744', '20070091', '2347745', '2347746', '2347711', '20070077', '2347712', '2347747', '2347748', '2347713', '2347715', '2347716', '20070083', '2347749', '2347717', '2347750', '2347751', '2347714', '2347752', '20070090', '2347729', '2347753'];
        var names=['An Giang', 'B√¨nh D∆∞∆°ng', 'B√¨nh Ph∆∞·ªõc', 'B√¨nh Thu·∫≠n', 'B√¨nh ƒê·ªãnh', 'B·∫°c Li√™u', 'B·∫Øc Giang', 'B·∫Øc K·∫°n', 'B·∫Øc Ninh', 'B·∫øn Tre', 'Cao B·∫±ng', 'C√† Mau', 'C·∫ßn Th∆°', 'ƒêi·ªán Bi√™n', 'ƒê√† N·∫µng', 'ƒê√† L·∫°t', 'ƒê·∫Øk L·∫Øk', 'ƒê·∫Øk N√¥ng', 'ƒê·ªìng Nai', 'ƒê·ªìng Th√°p', 'Gia Lai', 'H√† N·ªôi', 'TP. H·ªì Ch√≠ Minh', 'H√† Giang', 'H√† Nam', 'H√† Tƒ©nh', 'H√≤a B√¨nh', 'H∆∞ng Y√™n', 'H·∫£i D∆∞∆°ng', 'H·∫£i Ph√≤ng', 'H·∫≠u Giang', 'Kh√°nh H√≤a', 'Ki√™n Giang', 'Kon Tum', 'Lai Ch√¢u', 'Long An', 'L√†o Cai', 'L√¢m ƒê·ªìng', 'L·∫°ng S∆°n', 'Nam ƒê·ªãnh', 'Ngh·ªá An', 'Ninh B√¨nh', 'Ninh Thu·∫≠n', 'Ph√∫ Th·ªç', 'Ph√∫ Y√™n', 'Qu·∫£ng B√¨nh', 'Qu·∫£ng Nam', 'Qu·∫£ng Ng√£i', 'Qu·∫£ng Ninh', 'Qu·∫£ng Tr·ªã', 'S√≥c TrƒÉng', 'S∆°n La', 'Thanh H√≥a', 'Th√°i B√¨nh', 'Th√°i Nguy√™n', 'Th·ª´a Thi√™n Hu·∫ø', 'Ti·ªÅn Giang', 'Tr√† Vinh', 'Tuy√™n Quang', 'T√¢y Ninh', 'Vƒ©nh Long', 'Vƒ©nh Ph√∫c', 'V≈©ng T√†u', 'Y√™n B√°i'];

        function load_provinces() {
            var provinces = document.getElementById("provinces");
            for (var i = 0; i < ids.length; i++) {
                var opt = document.createElement("option");
                opt.value = ids[i];
                opt.innerText = names[i];
                provinces.appendChild(opt);
            }
        }

        load_provinces();

        function show_detail_weather_forecast(value) {
            if (!value) return;
            
            var proxy = "https://api.codetabs.com/v1/proxy?quest="; 
            var api = "https://utils3.cnnd.vn/ajax/weatherinfo/" + value + ".htm";
            var api_proxy = proxy + encodeURIComponent(api);
            
            var my_div = document.getElementById("my_div");
            my_div.innerHTML = '<div class="loading"><div class="loading-spinner"></div><p>ƒêang t·∫£i d·ªØ li·ªáu th·ªùi ti·∫øt...</p></div>';
            
            var xhr = new XMLHttpRequest();
            xhr.open("GET", api_proxy, true);
            xhr.send();
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        try {
                            var response = JSON.parse(xhr.responseText);
                            var weather = response.Data.data.datainfo;
                            
                            var html = '<div class="weather-card">';
                            
                            // Current weather
                            html += '<div class="current-weather">';
                            html += '<div class="weather-main">';
                            html += '<div class="weather-icon"><img src="' + weather.shadow_icon + '" alt="weather"></div>';
                            html += '<div class="weather-temp">' + weather.temperature + '<span class="degree">¬∞' + weather.degree + '</span></div>';
                            html += '</div>';
                            html += '<div class="weather-info-main">';
                            html += '<div class="location-name">' + weather.location + '</div>';
                            html += '<div class="weather-status">' + weather.status + '</div>';
                            html += '<div class="temp-range">‚Üë ' + weather.high + '¬∞ ‚Üì ' + weather.low + '¬∞</div>';
                            html += '</div>';
                            html += '</div>';
                            
                            // Weather details
                            html += '<div class="weather-details">';
                            html += '<div class="detail-item"><div class="detail-label">C·∫£m gi√°c nh∆∞</div><div class="detail-value">' + weather.feels_like + '¬∞C</div></div>';
                            html += '<div class="detail-item"><div class="detail-label">ƒê·ªô ·∫©m</div><div class="detail-value">' + weather.humidity + '</div></div>';
                            html += '<div class="detail-item"><div class="detail-label">T·∫ßm nh√¨n</div><div class="detail-value">' + weather.visibility.index + ' ' + weather.visibility.unit + '</div></div>';
                            html += '<div class="detail-item"><div class="detail-label">Gi√≥</div><div class="detail-value">' + weather.wind.index + ' ' + weather.wind.unit + '</div></div>';
                            html += '<div class="detail-item"><div class="detail-label">UV Index</div><div class="detail-value">' + weather.UV_index.index + ' - ' + weather.UV_index.status + '</div></div>';
                            html += '<div class="detail-item"><div class="detail-label">M·∫∑t tr·ªùi m·ªçc</div><div class="detail-value">' + weather.sunrise + '</div></div>';
                            html += '</div>';
                            
                            // Hourly forecast
                            if (weather.hourly_temperature && weather.hourly_temperature.length > 0) {
                                html += '<div class="hourly-forecast">';
                                html += '<div class="section-title">D·ª± b√°o theo gi·ªù</div>';
                                html += '<div class="hourly-items">';
                                weather.hourly_temperature.forEach(function(hour) {
                                    html += '<div class="hourly-item">';
                                    html += '<div class="hourly-time">' + hour.time + ':00</div>';
                                    html += '<div class="hourly-icon"><img src="' + hour.shadow_icon + '" alt="weather"></div>';
                                    html += '<div class="hourly-temp">' + hour.temperature + '¬∞</div>';
                                    html += '<div class="hourly-status">' + hour.status + '</div>';
                                    html += '</div>';
                                });
                                html += '</div></div>';
                            }
                            
                            // Daily forecast
                            if (weather.forecast && weather.forecast.length > 0) {
                                html += '<div class="daily-forecast">';
                                html += '<div class="section-title">D·ª± b√°o 10 ng√†y t·ªõi</div>';
                                html += '<div class="forecast-items">';
                                weather.forecast.forEach(function(day) {
                                    html += '<div class="forecast-item">';
                                    html += '<div class="forecast-date">' + day.date + '<br><small>' + day.forecastDate + '</small></div>';
                                    html += '<div class="forecast-icon"><img src="' + day.shadow_icon + '" alt="weather"></div>';
                                    html += '<div class="forecast-status">' + day.status + '</div>';
                                    html += '<div class="forecast-precipitation">üíß ' + day.precipitation + '</div>';
                                    html += '<div class="forecast-temp"><span class="high">' + day.high + '¬∞</span> / <span class="low">' + day.low + '¬∞</span></div>';
                                    html += '</div>';
                                });
                                html += '</div></div>';
                            }
                            
                            // Air quality
                            if (weather.air) {
                                html += '<div class="air-quality">';
                                html += '<div class="section-title">Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠</div>';
                                html += '<div class="air-quality-header">';
                                html += '<div class="air-icon"><img src="' + weather.air.icon + '" alt="air quality"></div>';
                                html += '<div class="air-info">';
                                html += '<div class="air-status">' + weather.air.status + '</div>';
                                html += '<div class="air-index">AQI: ' + weather.air.aqi + ' - ' + weather.air.pollutants.index + ': ' + weather.air.pollutants.value + ' ' + weather.air.pollutants.unit + '</div>';
                                html += '</div></div></div>';
                            }
                            
                            html += '</div>';
                            my_div.innerHTML = html;
                        } catch (e) {
                            my_div.innerHTML = '<div class="error"><h3> L·ªói khi x·ª≠ l√Ω d·ªØ li·ªáu</h3><p>' + e.message + '</p></div>';
                        }
                    } else {
                        my_div.innerHTML = '<div class="error"><h3> Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu</h3><p>M√£ l·ªói: ' + xhr.status + '</p></div>';
                    }
                }
            }
        }
    </script>
</body>
</html>