<!DOCTYPE html>
<html>
<head>
    <title>Nguyen Thi Yen Nhi</title>
    <script>
        var database=[
            {
                ID:"P01",
                Name:"Coca",
                Quantity:7,
                Price:10000,
                Photo: "coca.jpg"
            },
            {
                ID:"P02",
                Name:"Sting",
                Quantity:9,
                Price:12000,
                Photo: "sting.jpg"
            },
            {
                ID:"P03",
                Name:"Sprite",
                Quantity:5,
                Price:17000,
                Photo: "sprite.jpg"
            },
            {
                ID:"P04",
                Name:"Lavie",
                Quantity:10,
                Price:7000,
                Photo: "lavie.jpg"
            },
            {
                ID:"P05",
                Name:"REdbull",
                Quantity:14,
                Price:20000,
                Photo: "redbull.jpg"
            },
        ]
    </script>
</head>
<body>
    <body>
        <table border="1">
            <caption>List of product</caption>
            <thead>
            <tr>
                <td>ID</td>
                <td>Name</td>
                <td>Quantity</td>
                <td>Price</td>
                <td>Photo</td>
                <td>Actions</td>
            </tr>
            </thead>
            <tbody id="product_tbody">


            </tbody>
        </table>
        <script type="text/javascript">
            function display_products_table()
            {
                //get product_tbody element:
                product_tbody=document.getElementById("product_tbody")
                //loop all item:
                for(i=0;i<database.length;i++)
                {
                    //get a product by index:
                    product=database[i]
                    //create a new tr(row):
                    row=document.createElement("tr")
                    //create 6 td(s) for this row
                    td_id=document.createElement("td")
                    td_name=document.createElement("td")
                    td_quantity=document.createElement("td")
                    td_price=document.createElement("td")
                    td_photo=document.createElement("td")
                    td_action=document.createElement("td")
                    //asign value for each td(s):
                    td_id.innerText=product.ID
                    td_name.innerText=product.Name
                    td_quantity.innerText=product.Quantity
                    td_price.innerText=product.Price

                    //td_photo.innerText="<later.....>"
                    img_p=document.createElement("img")
                    img_p.setAttribute("src","../images/"+product.Photo)
                    img_p.setAttribute("width","100")
                    img_p.setAttribute("height","120")
                    img_p.setAttribute("title","click here to view detail..")
                    img_p.setAttribute("style","cursor:pointer")
                    //push img into td_photo
                    td_photo.appendChild(img_p)

                    //td_action.innerText="to be continue!>"
                    img_detail=document.createElement("img")
                    img_detail.setAttribute("src","../images/detail.png")
                    img_detail.setAttribute("titile","view detail")
                    img_detail.setAttribute("style","cursor:pointer")
                    td_action.appendChild(img_detail)

                    img_edit=document.createElement("img")
                    img_edit.setAttribute("src","../images/edit.png")
                    img_edit.setAttribute("titile","view detail")
                    img_edit.setAttribute("style","cursor:pointer")
                    td_action.appendChild(img_edit)

                    img_delete=document.createElement("img")
                    img_delete.setAttribute("src","../images/delete.png")
                    img_delete.setAttribute("titile","view detail")
                    img_delete.setAttribute("style","cursor:pointer")
                    td_action.appendChild(img_delete)

                    img_delete.parent_row=row
                    img_delete.onclick=function()
                    {
                        selected_row=this.parent_row
                        name_remove=selected_row.childNodes[1].innerText
                        if (confirm("e, mún xóa "+name_remove+" hả?"))
                    {
                        //since selected_row is a child node of product_tbody
                        product_tbody.removeChild(selected_row)
                    }
                    }

                    img_detail.selected_product=product
                    img_detail.onclick=function()
                    {
                        //get selected product
                        p=this.selected_product
                        //convert p to object into string(json format):
                        stringJsonObject=JSON.stringify(p)
                        //save this string into hardware by localstorage:
                        localStorage.setItem("selected_product",stringJsonObject)
                        //open detail page:
                        window.open("detail.html","_self")
                    }

                    //push td(s) into tr(row)
                    row.appendChild(td_id)
                    row.appendChild(td_name)
                    row.appendChild(td_quantity)
                    row.appendChild(td_price)
                    row.appendChild(td_photo)
                    row.appendChild(td_action)
                    //push tr(row) into product_tbody
                    product_tbody.appendChild(row)

                    
                }
            }
            //call function
            display_products_table()
        </script>
    </body>
</body>
</html>